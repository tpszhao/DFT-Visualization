{"version":3,"sources":["DraggableContainer.js","DrawingPad.js","Epicycle.js","index.js","App.js"],"names":["DraggableContainer","props","useState","x","y","offset","setOffset","containerStyle","position","zIndex","left","top","draggerRef","useRef","prevPos","isDragging","stopdrag","e","preventDefault","current","ref","style","display","justifyContent","alignItems","backgroundColor","cursor","Width","padding","onMouseDown","clientX","clientY","onMouseMove","prevX","prevY","onMouseUp","onMouseLeave","children","DrawingPad","width","height","hide","addpoint","origin","canvasRef","isDrawing","useEffect","canvas","className","context","getContext","resetTransform","clearRect","translate","currentpoint","getBoundingClientRect","mouseup","beginPath","moveTo","lineTo","stroke","flexDirection","onClick","toggleanimation","Epicycle","path","animate","Idx","setIdx","epicycleRef","traceRef","DFT","forEach","item","DFTcompute","interval","length","setInterval","draw","trace","Math","min","clearInterval","len","idx","previdx","connected","strokeStyle","sequence","a","b","i","norm","angle","speed","arc","PI","phase","cos","sin","dist","sqrt","pow","k","re","im","n","phi","size","args","atan2","push","sort","ReactDOM","render","setAnimate","setSize","updateSize","window","innerWidth","innerHeight","addEventListener","removeEventListener","useWindowSize","special","newpath","slice","document","getElementById"],"mappings":"iKAEe,SAASA,EAAmBC,GAAQ,IAAD,EAClBC,mBAAS,CAACC,EAAE,EAAEC,EAAE,IADE,mBACvCC,EADuC,KAC/BC,EAD+B,KAExCC,EAAe,CACjBC,SAAS,WAAWC,OAAO,GAC3BC,KAAKL,EAAOF,EAAEQ,IAAIN,EAAOD,GASvBQ,EAAaC,iBAAO,MACpBC,EAAUD,iBAAO,GACjBE,EAAaF,kBAAO,GAkBpBG,EAAW,SAAAC,GACbA,EAAEC,iBACFH,EAAWI,SAAU,GAEzB,OAAQ,yBAAKC,IAAKR,EAAYS,MAAOd,GACzB,yBAAKc,MAjCI,CACjBC,QAAQ,OACRC,eAAe,SACfC,WAAW,SACXC,gBAAgB,YAChBC,OAAO,UACPC,MAAM,IAAIC,QAAQ,IA4BVC,YAtBM,SAAAZ,GACdA,EAAEC,iBACFJ,EAAQK,QAAU,CAAChB,EAAEc,EAAEa,QAAQ1B,EAAEa,EAAEc,SACnChB,EAAWI,SAAU,GAoBba,YAjBC,SAAAf,GAET,GADAA,EAAEC,iBACCH,EAAWI,QAAQ,CAAC,IAAD,EACQL,EAAQK,QAAzBc,EADS,EACX9B,EAAU+B,EADC,EACH9B,EADG,EAEJ,CAACa,EAAEa,QAAQb,EAAEc,SAApB5B,EAFW,KAETC,EAFS,KAGlBU,EAAQK,QAAU,CAAChB,IAAEC,KACrBE,EAAU,CAACH,EAAEE,EAAOF,EAAIA,EAAI8B,EAAM7B,EAAEC,EAAOD,EAAEA,EAAE8B,MAY3CC,UAAanB,EACboB,aAAcpB,GAJd,sBAMCf,EAAMoC,UC3CR,SAASC,EAAWrC,GAAO,IACjCsC,EAA8BtC,EAA9BsC,MAAMC,EAAwBvC,EAAxBuC,OAAOC,EAAiBxC,EAAjBwC,KAAKC,EAAYzC,EAAZyC,SACnBC,EAAS,CAACxC,EAAEoC,EAAM,EAAEnC,EAAEoC,EAAO,GAE7BI,EAAY/B,iBAAO,MACnBgC,EAAYhC,kBAAO,GACnBC,EAAUD,iBAAO,MAEvBiC,qBAAU,WACR,IAAMC,EAASH,EAAUzB,QACzB4B,EAAOC,UAAY/C,EAAM+C,UACzBD,EAAOR,MAAQA,EACfQ,EAAOP,OAASA,EAChB,IAAMS,EAAUF,EAAOG,WAAW,MAClCD,EAAQE,iBACRF,EAAQG,UAAU,EAAE,EAAEb,EAAMC,GAC5BS,EAAQI,UAAUV,EAAOxC,EAAEwC,EAAOvC,KAClC,CAACmC,EAAMC,IAET,IAAMc,EAAe,SAAArC,GAAK,IAAD,EACJ2B,EAAUzB,QAAQoC,wBAA9B5C,EADgB,EAChBA,IAAID,EADY,EACZA,KACX,MAAO,CAACP,EAAEc,EAAEa,QAAUpB,EAAOiC,EAAOxC,EAAGC,EAAEa,EAAEc,QAAUpB,EAAMgC,EAAOvC,IAuB9DoD,EAAU,SAAAvC,GACd4B,EAAU1B,SAAU,EACpBuB,EAAS,EAAE,GAAE,EAAK,QAYpB,OACE,oCACE,4BAAQtB,IAAKwB,EACXZ,YA9BY,SAAAf,GAChB,GAAI4B,EAAU1B,QAAQ,CACpB,IAAM8B,EAAUL,EAAUzB,QAAQ+B,WAAW,MADzB,EAENI,EAAarC,GAApBd,EAFa,EAEbA,EAAEC,EAFW,EAEXA,EACT6C,EAAQQ,YACRR,EAAQS,OAAO5C,EAAQK,QAAQhB,EAAEW,EAAQK,QAAQf,GACjD6C,EAAQU,OAAOxD,EAAEC,GACjBU,EAAQK,QAAU,CAAChB,IAAEC,KACrB6C,EAAQW,SACRlB,EAASvC,EAAEC,GAAE,KAsBX+B,UAAaqB,EACb3B,YAvCY,SAAAZ,GAChB4B,EAAU1B,SAAU,EADC,MAEPmC,EAAarC,GAApBd,EAFc,EAEdA,EAAEC,EAFY,EAEZA,EACTsC,EAASvC,EAAEC,GAAE,GACbU,EAAQK,QAAU,CAAChB,IAAEC,MAoCjBgC,aAAgBoB,EAChBnC,MAAO,CAACC,QAAQmB,EAAM,OAAS,MACjC,kBAACzC,EAAD,KACE,yBAAKqB,MAAO,CAACC,QAAQ,OAAOuC,cAAc,WACxC,4BAAQC,QAAS7D,EAAM8D,iBAAkBtB,EAAK,OAAO,QAArD,cACA,4BAAQqB,QApBF,WACZpB,EAAS,EAAE,GAAE,EAAM,SACnB,IAAMO,EAAUL,EAAUzB,QAAQ+B,WAAW,MAC7CD,EAAQE,iBACRF,EAAQG,UAAU,EAAE,EAAEb,EAAMC,GAC5BS,EAAQI,UAAUV,EAAOxC,EAAEwC,EAAOvC,IAeJiB,MAAO,CAACC,QAAQmB,EAAM,OAAS,KAAvD,YCtEK,SAASuB,EAAS/D,GAAQ,IAAD,EACSA,EAAxCgE,YAD+B,MACxB,GADwB,IACShE,EAA9BiE,eADqB,SACP3B,EAAgBtC,EAAhBsC,MAAMC,EAAUvC,EAAVuC,OADC,EAEhBtC,mBAAS,GAFO,mBAE/BiE,EAF+B,KAE1BC,EAF0B,KAIhCC,EAAcxD,iBAAO,MACrByD,EAAWzD,iBAAO,MAClB8B,EAAS,CAACxC,EAAEoC,EAAM,EAAEnC,EAAEoC,EAAO,GAC7B+B,EAAM1D,iBAAO,IAGnBiC,qBAAU,WACR,CAACuB,EAAYC,GAAUE,SAAQ,SAAAC,GAC7B,IAAM1B,EAAS0B,EAAKtD,QACpB4B,EAAOC,UAAY/C,EAAM+C,UACzBD,EAAOR,MAAQA,EACfQ,EAAOP,OAASA,EAChB,IAAMS,EAAUF,EAAOG,WAAW,MAClCD,EAAQE,iBACRF,EAAQI,UAAUV,EAAOxC,EAAEwC,EAAOvC,GAClC6C,EAAQG,WAAWT,EAAOxC,GAAGwC,EAAOvC,EAAEmC,EAAMC,QAE7C,CAACD,EAAMC,IAEVM,qBAAU,WACQuB,EAAYlD,QAAQ+B,WAAW,MACvCE,WAAWT,EAAOxC,GAAGwC,EAAOvC,EAAEmC,EAAMC,GAC5CkC,IACAN,EAAO,KACP,CAACH,IAEHnB,qBAAU,WACR,IAAI6B,EAAW,KAYb,OAXIT,GAASD,EAAKW,OAAS,EACzBD,EAAWE,aAAY,WACrBC,IACAC,IACAX,GAAO,SAAAD,GAAG,OAAIA,EAAM,OACnBa,KAAKC,IAAI,IAAMhB,EAAKW,OAAO,MAE9BM,cAAcP,GACdN,EAAYlD,QAAQ+B,WAAW,MAAME,WAAWT,EAAOxC,GAAGwC,EAAOvC,EAAEmC,EAAMC,GACzE8B,EAASnD,QAAQ+B,WAAW,MAAME,WAAWT,EAAOxC,GAAGwC,EAAOvC,EAAEmC,EAAMC,IAEjE,kBAAM0C,cAAcP,MAC3B,CAACT,EAAQC,IAEb,IAAMY,EAAQ,WACZ,IAAM9B,EAAUqB,EAASnD,QAAQ+B,WAAW,MACxCiC,EAAMlB,EAAKW,OACf,GAAIO,EAAM,EAAE,CACV,IAAIC,EAAMjB,EAAMgB,EAChB,OAAOC,EAAM,GACX,KAAK,EACHnC,EAAQG,WAAWT,EAAOxC,GAAGwC,EAAOvC,EAAEmC,EAAMC,GAC5C,MACF,KAAK,EACH,IAAI6C,EAAUpB,EAAKmB,GAAKE,WAAYF,EAAI,GAAGD,EAAMC,EACjDnC,EAAQQ,YACRR,EAAQS,OAAOO,EAAKoB,GAASlF,EAAE8D,EAAKoB,GAASjF,GAC7C6C,EAAQU,OAAOM,EAAKmB,GAAKjF,EAAE8D,EAAKmB,GAAKhF,GACrC6C,EAAQW,YAQVkB,EAAO,WACX,IAAM7B,EAAUoB,EAAYlD,QAAQ+B,WAAW,MAC/CD,EAAQG,WAAWT,EAAOxC,GAAGwC,EAAOvC,EAAEmC,EAAMC,GAC5CS,EAAQsC,YAAc,UACtB,IAAIC,EAAWjB,EAAIpD,QACfgE,EAAMK,EAASZ,OACnB,GAAIO,EAAM,EAAE,CAIV,IAHA,IAAIM,EAAI,EACJC,EAAI,EAFE,EAGEzB,EAAKE,EAAIgB,GAAhBhF,EAHK,EAGLA,EAAEC,EAHG,EAGHA,EACEuF,EAAI,EAAGA,EAAIR,EAAKQ,IAAI,CAC3B,IAAIC,EAAOJ,EAASG,GAAGC,KAAKT,EACxBU,EAAQL,EAASG,GAAGE,MACpBC,EAAQN,EAASG,GAAGG,MAExB7C,EAAQQ,YACRR,EAAQ8C,IAAIN,EAAEC,EAAEE,EAAK,EAAE,EAAEZ,KAAKgB,IAC9B/C,EAAQW,SAERX,EAAQQ,YACRR,EAAQS,OAAO+B,EAAGC,GAClB,IAAIO,EAAS,EAAEjB,KAAKgB,GAAG7B,EAAI2B,EAAOX,EAKlC,GAJAM,GAAKG,EAAKZ,KAAKkB,IAAIL,EAAQI,GAC3BP,GAAKE,EAAKZ,KAAKmB,IAAIN,EAAQI,GAC3BhD,EAAQU,OAAO8B,EAAEC,GACjBzC,EAAQW,SACJwC,EAAKX,EAAEC,EAAEvF,EAAEC,GAAK,GAAKuF,EAAI,GAAI,MAEnC1C,EAAQQ,YACRR,EAAQS,OAAO+B,EAAEC,GACjBzC,EAAQU,OAAOxD,EAAEC,GACjB6C,EAAQW,WAGNwC,EAAO,SAACX,EAAEC,EAAEvF,EAAEC,GAClB,OAAO4E,KAAKqB,KAAKrB,KAAKsB,IAAInG,EAAEsF,EAAE,GAAGT,KAAKsB,IAAIlG,EAAEsF,EAAE,KAE1ChB,EAAa,WAGjB,IAFA,IAAIc,EAAW,GACXL,EAAMlB,EAAKW,OACN2B,EAAI,EAAGA,EAAEpB,EAAIoB,IAAK,CAGzB,IAFA,IAAIC,EAAK,EACLC,EAAK,EACAC,EAAI,EAAGA,EAAEvB,EAAIuB,IAAI,CACxB,IAAMC,EAAe,EAAR3B,KAAKgB,GAAKO,EAAEG,EAAGvB,EAC1BqB,GAAMvC,EAAKyC,GAAGvG,EAAI6E,KAAKkB,IAAIS,GAC3BF,GAAMxC,EAAKyC,GAAGvG,EAAI6E,KAAKmB,IAAIQ,GAE3BF,GAAMxC,EAAKyC,GAAGtG,EAAI4E,KAAKkB,IAAIS,GAC3BH,GAAMvC,EAAKyC,GAAGtG,EAAI4E,KAAKmB,IAAIQ,GAE/B,IAAIC,EAAO5B,KAAKqB,KAAKG,EAAGA,EAAGC,EAAGA,GAC1BI,EAAO7B,KAAK8B,MAAML,EAAGD,GACzBhB,EAASuB,KAAK,CAACnB,KAAKgB,EAAKf,MAAMgB,EAAKf,MAAMS,IAE5Cf,EAASwB,MAAK,SAACvB,EAAEC,GAAH,OAAQA,EAAEE,KAAOH,EAAEG,QACjCrB,EAAIpD,QAAUqE,GAGhB,OAAQ,oCACN,4BAAQpE,IAAOiD,IACf,4BAAQjD,IAAOkD,K,KC7HnB2C,IAASC,OAAO,mBCWD,WACX,IAAMjD,EAAOpD,iBAAO,IADM,EAEIX,oBAAS,GAFb,mBAEnBgE,EAFmB,KAEViD,EAFU,OAZ9B,WAA0B,IAAD,EACGjH,mBAAS,CAAC,EAAG,IADhB,mBACd0G,EADc,KACRQ,EADQ,KAUrB,OARAtE,qBAAU,WACV,SAASuE,IACLD,EAAQ,CAACE,OAAOC,WAAYD,OAAOE,cAIvC,OAFAF,OAAOG,iBAAiB,SAAUJ,GAClCA,IACO,kBAAMC,OAAOI,oBAAoB,SAAUL,MAC/C,IACIT,EAKgBe,GAHG,mBAGnBpF,EAHmB,KAGbC,EAHa,KA0B1B,OArBAM,qBAAU,WACNqE,GAAW,KACb,CAAC5E,EAAMC,IAmBD,oCACI,kBAACF,EAAD,CAAYU,UAAU,sBAAsBT,MAAOA,EAAOC,OAAQA,EAC9DE,SAnBK,SAACvC,EAAEC,EAAEkF,GAA4B,IAAlBsC,EAAiB,uDAAT,OACxC,OAAOA,GACH,IAAK,QACD3D,EAAK9C,QAAU,GACf,MACJ,IAAK,MACD,IAAI0G,EAAU5D,EAAK9C,QAAQ2G,QAC3B7D,EAAK9C,QAAU0G,EACf,MACJ,QACI5D,EAAK9C,QAAQ4F,KAAK,CAAC5G,IAAEC,IAAEkF,gBAUnBvB,gBALQ,kBAAKoD,GAAYjD,IAMzBzB,KAAMyB,IACV,kBAACF,EAAD,CAAUhB,UAAU,kBAAkBT,MAAOA,EAAOC,OAAQA,EACxD0B,QAASA,EACTD,KAAMA,EAAK9C,aD5Cf,MAAS4G,SAASC,eAAe,U","file":"static/js/main.6226fb23.chunk.js","sourcesContent":["import React, {useRef,useState} from 'react'\r\n\r\nexport default function DraggableContainer(props) {\r\n    const [offset, setOffset] = useState({x:0,y:0});\r\n    const containerStyle={\r\n        position:'absolute',zIndex:50,\r\n        left:offset.x,top:offset.y};\r\n    const draggerStyle = {\r\n        display:'flex',\r\n        justifyContent:'center',\r\n        alignItems:'center',\r\n        backgroundColor:'lightblue',\r\n        cursor:'pointer',\r\n        Width:200,padding:20\r\n    }\r\n    const draggerRef = useRef(null);\r\n    const prevPos = useRef(0);\r\n    const isDragging = useRef(false)\r\n\r\n    const dragstart = e =>{\r\n        e.preventDefault();\r\n        prevPos.current = {x:e.clientX,y:e.clientY};\r\n        isDragging.current = true;\r\n    }\r\n\r\n    const drag = e=>{\r\n        e.preventDefault();\r\n        if(isDragging.current){\r\n            const {x:prevX,y:prevY} = prevPos.current;\r\n            const [x,y] = [e.clientX,e.clientY];\r\n            prevPos.current = {x,y};\r\n            setOffset({x:offset.x + x - prevX,y:offset.y+y-prevY});\r\n        }\r\n    }\r\n\r\n    const stopdrag = e=>{\r\n        e.preventDefault();\r\n        isDragging.current = false;\r\n    }\r\n    return (<div ref={draggerRef} style={containerStyle}>\r\n                <div style={draggerStyle}\r\n                onMouseDown={dragstart}\r\n                onMouseMove={drag}\r\n                onMouseUp = {stopdrag}\r\n                onMouseLeave={stopdrag}\r\n                >Click Here to Drag</div>\r\n                {props.children}\r\n            </div>\r\n    )\r\n}\r\n","import React, {useRef, useEffect} from 'react';\r\nimport DraggableContainer from './DraggableContainer'\r\n\r\nexport default function DrawingPad(props){\r\n  const {width,height,hide,addpoint} = props;\r\n  const origin = {x:width/2,y:height/2};\r\n\r\n  const canvasRef = useRef(null);\r\n  const isDrawing = useRef(false)\r\n  const prevPos = useRef(null);\r\n\r\n  useEffect(()=>{\r\n    const canvas = canvasRef.current;\r\n    canvas.className = props.className;\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n    const context = canvas.getContext('2d');\r\n    context.resetTransform();\r\n    context.clearRect(0,0,width,height);\r\n    context.translate(origin.x,origin.y);\r\n  },[width,height])\r\n\r\n  const currentpoint = e =>{\r\n    const {top,left} = canvasRef.current.getBoundingClientRect();\r\n    return {x:e.clientX - left - origin.x, y:e.clientY - top - origin.y}\r\n  }\r\n\r\n  const mousedown = e => {\r\n    isDrawing.current = true;\r\n    const {x,y} = currentpoint(e);\r\n    addpoint(x,y,false);\r\n    prevPos.current = {x,y};\r\n  }\r\n\r\n  const mousemove = e => {\r\n    if (isDrawing.current){\r\n      const context = canvasRef.current.getContext('2d');\r\n      const {x,y} = currentpoint(e);\r\n      context.beginPath();\r\n      context.moveTo(prevPos.current.x,prevPos.current.y);\r\n      context.lineTo(x,y);\r\n      prevPos.current = {x,y};\r\n      context.stroke();\r\n      addpoint(x,y,true);\r\n    }\r\n  }\r\n\r\n  const mouseup = e => {\r\n    isDrawing.current = false;\r\n    addpoint(0,0,true,\"new\");\r\n  }\r\n\r\n  const reset = ()=>{\r\n    addpoint(0,0,false,\"reset\");\r\n    const context = canvasRef.current.getContext('2d');\r\n    context.resetTransform();\r\n    context.clearRect(0,0,width,height);\r\n    context.translate(origin.x,origin.y);\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <canvas ref={canvasRef} \r\n        onMouseMove={mousemove} \r\n        onMouseUp = {mouseup} \r\n        onMouseDown = {mousedown} \r\n        onMouseLeave = {mouseup}\r\n        style={{display:hide ?\"none\" : \"\"}}/>\r\n      <DraggableContainer>\r\n        <div style={{display:'flex',flexDirection:\"column\"}}>\r\n          <button onClick={props.toggleanimation}>{hide?\"Stop\":\"Start\"} Animation</button>            \r\n          <button onClick={reset} style={{display:hide ?\"none\" : \"\"}}>Clear</button>  \r\n        </div>\r\n      </DraggableContainer>\r\n\r\n    </>\r\n\r\n  )\r\n}\r\n\r\n","import React,{useRef, useEffect,useState} from 'react'\r\n\r\nexport default function Epicycle(props) {\r\n  const {path = [],animate=false,width,height} = props;\r\n  const [Idx, setIdx] = useState(0);\r\n\r\n  const epicycleRef = useRef(null);\r\n  const traceRef = useRef(null);\r\n  const origin = {x:width/2,y:height/2};\r\n  const DFT = useRef([]);\r\n\r\n\r\n  useEffect(() => {\r\n    [epicycleRef,traceRef].forEach(item=>{\r\n      const canvas = item.current;\r\n      canvas.className = props.className;\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n      const context = canvas.getContext('2d');\r\n      context.resetTransform();\r\n      context.translate(origin.x,origin.y);\r\n      context.clearRect(-origin.x,-origin.y,width,height);\r\n    })\r\n  }, [width,height])\r\n\r\n  useEffect(()=>{\r\n    const context = epicycleRef.current.getContext('2d');\r\n    context.clearRect(-origin.x,-origin.y,width,height);\r\n    DFTcompute();\r\n    setIdx(0);\r\n  },[path])\r\n\r\n  useEffect(() => {\r\n    let interval = null;\r\n      if (animate&&path.length > 0) {\r\n        interval = setInterval(() => {\r\n          draw();\r\n          trace();\r\n          setIdx(Idx => Idx + 1);\r\n        }, Math.min(10000/path.length,50));\r\n      } else {\r\n        clearInterval(interval);\r\n        epicycleRef.current.getContext('2d').clearRect(-origin.x,-origin.y,width,height);\r\n        traceRef.current.getContext('2d').clearRect(-origin.x,-origin.y,width,height);\r\n      }\r\n      return () => clearInterval(interval);\r\n    },[animate,Idx]);\r\n\r\n  const trace = () => {\r\n    const context = traceRef.current.getContext('2d');\r\n    let len = path.length;\r\n    if (len > 1){\r\n      let idx = Idx % len;\r\n      switch(idx > 0){\r\n        case false:\r\n          context.clearRect(-origin.x,-origin.y,width,height);\r\n          break;\r\n        case true:\r\n          let previdx = path[idx].connected? (idx-1)%len : idx\r\n          context.beginPath();\r\n          context.moveTo(path[previdx].x,path[previdx].y);\r\n          context.lineTo(path[idx].x,path[idx].y);\r\n          context.stroke();\r\n          break;\r\n        default:\r\n      }\r\n    } \r\n  }\r\n  \r\n\r\n  const draw = ()=>{\r\n    const context = epicycleRef.current.getContext('2d');\r\n    context.clearRect(-origin.x,-origin.y,width,height);\r\n    context.strokeStyle = '#669999';\r\n    let sequence = DFT.current;\r\n    let len = sequence.length;\r\n    if (len > 1){\r\n      let a = 0;\r\n      let b = 0;\r\n      let {x,y} = path[Idx%len];\r\n      for (var i = 0; i < len; i++){\r\n        let norm = sequence[i].norm/len;\r\n        let angle = sequence[i].angle;\r\n        let speed = sequence[i].speed;\r\n\r\n        context.beginPath();\r\n        context.arc(a,b,norm,0,2*Math.PI);\r\n        context.stroke();\r\n\r\n        context.beginPath();\r\n        context.moveTo(a, b);\r\n        let phase = (2*Math.PI*Idx*speed)/len\r\n        a += norm*Math.cos(angle + phase);\r\n        b += norm*Math.sin(angle + phase);\r\n        context.lineTo(a,b);\r\n        context.stroke();\r\n        if (dist(a,b,x,y) < 5 && i > 30){break;}\r\n      }\r\n      context.beginPath();\r\n      context.moveTo(a,b);\r\n      context.lineTo(x,y);\r\n      context.stroke();\r\n    }\r\n  }\r\n  const dist = (a,b,x,y)=>{\r\n    return Math.sqrt(Math.pow(x-a,2)+Math.pow(y-b,2));\r\n  }\r\n  const DFTcompute = ()=>{\r\n    let sequence = [];\r\n    let len = path.length;\r\n    for (let k = 0; k<len;k++) {\r\n      let re = 0;\r\n      let im = 0;\r\n      for (let n = 0; n<len;n++){\r\n        const phi = (Math.PI*2*k*n)/len;\r\n          re += path[n].x * Math.cos(phi);\r\n          im -= path[n].x * Math.sin(phi);\r\n\r\n          im += path[n].y * Math.cos(phi);\r\n          re += path[n].y * Math.sin(phi);\r\n      }\r\n      let size = Math.sqrt(re*re+im*im);\r\n      let args = Math.atan2(im,re);\r\n      sequence.push({norm:size,angle:args,speed:k})\r\n    }\r\n    sequence.sort((a,b)=> b.norm - a.norm)\r\n    DFT.current = sequence;\r\n  }\r\n\r\n  return (<>\r\n    <canvas ref = {epicycleRef}/>\r\n    <canvas ref = {traceRef}/>\r\n  </>)\r\n}\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n\r\n","import React,{useRef,useState,useEffect} from 'react';\r\nimport DrawingPad from './DrawingPad';\r\nimport Epicycle from './Epicycle'\r\nimport './App.css';\r\n\r\nfunction useWindowSize() {\r\n    const [size, setSize] = useState([0, 0]);\r\n    useEffect(() => {\r\n    function updateSize() {\r\n        setSize([window.innerWidth, window.innerHeight]);\r\n    }\r\n    window.addEventListener('resize', updateSize);\r\n    updateSize();\r\n    return () => window.removeEventListener('resize', updateSize);\r\n    }, []);\r\n    return size;}\r\n\r\nexport default function App() {\r\n    const path = useRef([]);\r\n    const [animate, setAnimate] = useState(false);\r\n    const [width,height] = useWindowSize();\r\n\r\n    useEffect(()=>{\r\n        setAnimate(false)\r\n    },[width,height])\r\n    \r\n    const pathAddpoint = (x,y,connected,special=\"none\")=>{\r\n        switch(special){\r\n            case \"reset\":\r\n                path.current = [];\r\n                break;\r\n            case \"new\":\r\n                let newpath = path.current.slice();\r\n                path.current = newpath;\r\n                break;\r\n            default:\r\n                path.current.push({x,y,connected});\r\n                break;\r\n        }\r\n    }\r\n    \r\n    const toggleAnimation = ()=> setAnimate(!animate)\r\n\r\n    return (<>  \r\n                <DrawingPad className=\"top center absolute\" width={width} height={height} \r\n                    addpoint={pathAddpoint} \r\n                    toggleanimation = {toggleAnimation}\r\n                    hide={animate}/>  \r\n                <Epicycle className=\"center absolute\" width={width} height={height}\r\n                    animate={animate} \r\n                    path={path.current}/>        \r\n            </>\r\n    )\r\n}\r\n\r\n"],"sourceRoot":""}